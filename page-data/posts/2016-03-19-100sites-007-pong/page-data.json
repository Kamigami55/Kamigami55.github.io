{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/2016-03-19-100sites-007-pong/","result":{"data":{"markdownRemark":{"id":"089c88ca-1111-5874-b907-e013cf96b6c8","html":"<h1 id=\"pong，使用p5js建構的復古遊戲\" style=\"position:relative;\"><a href=\"#pong%EF%BC%8C%E4%BD%BF%E7%94%A8p5js%E5%BB%BA%E6%A7%8B%E7%9A%84%E5%BE%A9%E5%8F%A4%E9%81%8A%E6%88%B2\" aria-label=\"pong，使用p5js建構的復古遊戲 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pong，使用P5.js建構的復古遊戲</h1>\n<p><a href=\"http://kamigami55.github.io/100sites/007_Pong/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">點我遊玩</a></p>\n<p><a href=\"https://github.com/Kamigami55/100sites/tree/gh-pages/007_Pong\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">我想看看程式碼</a></p>\n<!-- more -->\n<p><img src=\"https://i.imgur.com/wznoZbr.jpg\" alt=\"螢幕快照 2016-03-20 上午1.23.09.png\"></p>\n<blockquote>\n<p>一句話摘要：使用P5.js這個JavaScript繪圖框架，重建Pong這個復古遊戲，並重新開動100sites專案</p>\n</blockquote>\n<p>因為一直很忙加上懶惰加上拖延，已經快一個月沒有持續我的100sites專案了，然現在我終於忙完了，是時候該重拾行囊，繼續走完這段成為專業全端工程師的修行之路了！</p>\n<p>這次的#007成品是Pong，一個很經典遊戲，左右兩位玩家操縱著各自的棒棒將球反彈給對方，漏球最多的一方輸。</p>\n<p>前些日子在SITCON年有講者分享<a href=\"http://p5js.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">P5.js</a>這個框架，他算是我在#006 Snack裡面使用的<a href=\"http://processingjs.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Processing.js</a>的兄弟，Processing.js使用Processing語言，但P5.js使用JavaScript來達到相同的功能，對於現在JS大熱門的趨勢來看，P5.js也是一個很值得學起來的框架之一呀！</p>\n<p>以下附上本次的程式碼：</p>\n<div class=\"gatsby-highlight\" data-language=\"htmlindex.html\"><pre class=\"language-htmlindex.html\"><code class=\"language-htmlindex.html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=&quot;UTF-8&quot;&gt;\n  &lt;title&gt;Pong!&lt;/title&gt;\n  &lt;script src=&quot;http://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.23/p5.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;pong.js&quot;&gt;&lt;/script&gt;\n  &lt;style&gt; body{padding:0; margin:0; overflow:hidden;} &lt;/style&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascriptpong.js\"><pre class=\"language-javascriptpong.js\"><code class=\"language-javascriptpong.js\">var BAR_MOVE_SPEED = 15;\nvar BALL_SIZE = 20;\nvar BALL_SPEED = 10;\n\nvar MAP_WIDTH = 800;\nvar MAP_HEIGHT = 500;\n\nvar BAR_WIDTH = 10;\nvar BAR_HEIGHT = 120;\n\nvar p1_y;\nvar p2_y;\nvar p1_score;\nvar p2_score;\n\nvar ball_x;\nvar ball_y;\nvar ball_velocity_x;\nvar ball_velocity_y;\n\nvar gamePaused = false;\nvar gameStarted = false;\n\nfunction setup() {\n  MAP_WIDTH = windowWidth;\n  MAP_HEIGHT = windowHeight;\n  createCanvas(MAP_WIDTH, MAP_HEIGHT);\n  \n  ellipseMode(CENTER);\n  rectMode(CENTER);\n\n  p1_y = MAP_HEIGHT/2;\n  p2_y = MAP_HEIGHT/2;\n  p1_score = 0;\n  p2_score = 0;\n  ball_x = MAP_WIDTH/2;\n  ball_y = MAP_HEIGHT/2;\n  ball_velocity_x = BALL_SPEED;\n  ball_velocity_y = BALL_SPEED;\n}\n\nfunction draw() {\n\n  if(!gamePaused &amp;&amp; gameStarted) {\n    pleyerControl();\n    ballMove();\n    ballCollide();\n    checkBallOutside();\n  }\n  displayGame();\n  displayGUI();\n\n}\n\n\nfunction keyPressed() {\n  if(keyCode === ENTER) {\n    if(!gameStarted) {\n      gameStarted = true;\n    } else {\n      gamePaused = !gamePaused;\n    }\n  }\n}\n\n\nfunction pleyerControl() {\n  if(keyIsDown(87) || keyIsDown(119)) { // W\n    if(p1_y-BAR_HEIGHT/2 &gt; 0) {\n      p1_y -= BAR_MOVE_SPEED;\n    }\n  } else if (keyIsDown(83) || keyIsDown(115)) { // S\n    if(p1_y+BAR_HEIGHT/2 &lt; MAP_HEIGHT) {\n      p1_y += BAR_MOVE_SPEED;\n    }\n  }\n\n  if(keyIsDown(UP_ARROW)) { // UP\n    if(p2_y-BAR_HEIGHT/2 &gt; 0) {\n      p2_y -= BAR_MOVE_SPEED;\n    }\n  } else if (keyIsDown(DOWN_ARROW)) { // DOWN\n    if(p2_y+BAR_HEIGHT/2 &lt; MAP_HEIGHT) {\n      p2_y += BAR_MOVE_SPEED;\n    }\n  }\n}\n\n\nfunction ballMove() {\n  ball_x += ball_velocity_x;\n  ball_y += ball_velocity_y;\n}\n\n\nfunction ballCollide() {\n  if(ball_y+BALL_SIZE/2 &gt; MAP_HEIGHT || ball_y-BALL_SIZE/2 &lt; 0) { // collide with upper and lower walls\n    ball_velocity_y = -ball_velocity_y;\n  }\n\n  if(ball_x &lt;= 30+BAR_WIDTH/2 // collide with player1\n    &amp;&amp; ball_x &gt;= 30-BAR_WIDTH/2\n    &amp;&amp; ball_y &gt;= p1_y-BAR_HEIGHT/2 \n    &amp;&amp; ball_y &lt;= p1_y+BAR_HEIGHT/2) { \n      ball_velocity_x = -ball_velocity_x;\n       // slightly change ball y speed according to the position ball hit on the bar\n      ball_velocity_y += (ball_y-p1_y)*10/(BAR_HEIGHT/2);\n      if(ball_velocity_y &gt; BALL_SPEED) // strict the ball speed not exceed max speed\n        ball_velocity_y = BALL_SPEED;\n      else if(ball_velocity_y &lt; -BALL_SPEED)\n        ball_velocity_y = -BALL_SPEED;\n  }\n\n  if(ball_x &gt;= MAP_WIDTH-30-BAR_WIDTH/2 // collide with player2\n    &amp;&amp; ball_x &lt;= MAP_WIDTH-30+BAR_WIDTH/2\n    &amp;&amp; ball_y &gt;= p2_y-BAR_HEIGHT/2 \n    &amp;&amp; ball_y &lt;= p2_y+BAR_HEIGHT/2) { \n      ball_velocity_x = -ball_velocity_x;\n       // slightly change ball y speed according to the position ball hit on the bar\n      ball_velocity_y += (ball_y-p2_y)*10/(BAR_HEIGHT/2);\n      if(ball_velocity_y &gt; BALL_SPEED) // strict the ball speed not exceed max speed\n        ball_velocity_y = BALL_SPEED;\n      else if(ball_velocity_y &lt; -BALL_SPEED)\n        ball_velocity_y = -BALL_SPEED;\n  }\n}\n\n\nfunction checkBallOutside() {\n  if(ball_x &gt; MAP_WIDTH) {\n    ball_x = MAP_WIDTH/2;\n    ball_y = MAP_HEIGHT/2;\n    ++p1_score;\n  } else if(ball_x &lt; 0) {\n    ball_x = MAP_WIDTH/2;\n    ball_y = MAP_HEIGHT/2;\n    ++p2_score;\n  }\n}\n\n\nfunction displayGame() {\n  background(0);\n  fill(255); // white\n  rect(30, p1_y, BAR_WIDTH, BAR_HEIGHT); // player1 bar\n  rect(MAP_WIDTH-30, p2_y, BAR_WIDTH, BAR_HEIGHT); // player2 bar\n  fill(0,255,255);\n  ellipse(ball_x, ball_y, BALL_SIZE, BALL_SIZE); // ball\n}\n\n\nfunction displayGUI() {\n  \n  if(gamePaused) {\n    textSize(100);\n    fill(255);\n    textAlign(CENTER);\n    text(&quot;PAUSED&quot;, MAP_WIDTH/2, MAP_HEIGHT/2);\n  }\n  if(!gameStarted) {\n    textAlign(CENTER);\n    textSize(100);\n    fill(0, 255, 255);\n    text(&quot;Pong!&quot;, MAP_WIDTH/2, 150);\n    fill(255);\n    textSize(80);\n    text(&quot;Press ENTER to Start&quot;, MAP_WIDTH/2, MAP_HEIGHT/2);\n    textSize(40);\n    text(&quot;Left player: W, S to move\\nRight player: UP, DOWN to move\\nPress ENTER to pause&quot;, MAP_WIDTH/2, MAP_HEIGHT/2+150); \n  }\n  textSize(30);\n  textAlign(LEFT);\n  text(p1_score, 30, 30);\n  textAlign(RIGHT);\n  text(p2_score, MAP_WIDTH-30, 30);\n}</code></pre></div>","fields":{"slug":"/posts/2016-03-19-100sites-007-pong/","tagSlugs":["/tag/100-sites/","/tag/project/","/tag/web/","/tag/p-5-js/"]},"frontmatter":{"date":"2016-03-19 17:55","description":"","tags":["100sites","Project","Web","P5js"],"title":"【100sites #007】Pong，使用P5.js建構的復古遊戲","socialImage":"https://i.imgur.com/wznoZbr.jpg"}}},"pageContext":{"slug":"/posts/2016-03-19-100sites-007-pong/"}},"staticQueryHashes":["251939775","401334301","825871152"]}